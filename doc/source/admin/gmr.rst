..
      Except where otherwise noted, this document is licensed under Creative
      Commons Attribution 3.0 License.  You can view the license at:

          https://creativecommons.org/licenses/by/3.0/

.. _watcher_gmr:

=======================
Guru Meditation Reports
=======================

Watcher contains a mechanism whereby developers and system administrators can
generate a report about the state of a running Watcher service. This report
is called a *Guru Meditation Report* (*GMR* for short).

Generating a GMR
================

A *GMR* can be generated by sending the *USR2* signal to any Watcher process
with support (see below).  The *GMR* will then be outputted as standard error
for that particular process.

For example, suppose that ``watcher-api`` has process id ``8675``, and was run
with ``2>/var/log/watcher/watcher-api-err.log``.  Then, ``kill -USR2 8675``
will trigger the Guru Meditation report to be printed to
``/var/log/watcher/watcher-api-err.log``.

Structure of a GMR
==================

The *GMR* is designed to be extensible; any particular service may add its
own sections.  However, the base *GMR* consists of several sections:

Package
  Shows information about the package to which this process belongs, including
  version information.

Threads
  Shows stack traces and thread ids for each of the threads within this
  process.

Green Threads
  Shows stack traces for each of the green threads within this process (green
  threads don't have thread ids).

Configuration
  Lists all the configuration options currently accessible via the CONF object
  for the current process.

Plugins
  Lists all the plugins currently accessible by the Watcher service.
